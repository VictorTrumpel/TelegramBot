<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
</head>
<body>

<div id="payment-form"></div>

<script src="https://telegram.org/js/telegram-web-app.js"></script>
<script src="https://yookassa.ru/checkout-widget/v1/checkout-widget.js"></script>
<script>

async function getPaymentToken() {
	const res = await fetch('http://streamcast.victortw.beget.tech/', {
		method: 'GET',
		headers: {
			'Content-Type': 'application/json;charset=utf-8'
		},
	})

	const token = await res.json()

	return token
}

(async () => {
	const res = await getPaymentToken()

	const checkout = new window.YooMoneyCheckoutWidget({
		confirmation_token: res.confirmation.confirmation_token,
		return_url: 'https://yookassa.ru/',
		error_callback: function(error) {
			console.log(error)
		}
	})

	checkout.render('payment-form');
})()

</script>
</body>
</html>
